(this.webpackJsonpkalyanovmagazin=this.webpackJsonpkalyanovmagazin||[]).push([[0],{16:function(e,t,a){e.exports={Card:"Card_Card__1IMz0",Favorite:"Card_Favorite__3cORz",Price:"Card_Price__1xAcI",Plus:"Card_Plus__3DsUq"}},40:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(32),s=a.n(n),i=a(13),o=(a(40),a(10)),l=a(11),d=a(7),j=a.n(d),u=a(12),b=a(3),m=a(4),h=a.n(m),x=c.a.createContext({}),O=function(){var e=c.a.useContext(x),t=e.cartItems,a=e.setCartItems,r=t.reduce((function(e,t){return t.price+e}),0);return{cartItems:t,setCartItems:a,totalPrice:r}},v=a(1);var p=function(e){var t=O().totalPrice;return Object(v.jsxs)("header",{children:[Object(v.jsx)(i.b,{to:"/",children:Object(v.jsxs)("div",{className:"headerLeft",children:[Object(v.jsx)("img",{src:"./img/bong-solid.svg",alt:"logo"}),Object(v.jsxs)("div",{className:"headerInfo",children:[Object(v.jsx)("h3",{children:"\u0414\u0430\u0432\u0430\u0439 \u0417\u0430\u043a\u0438\u043d\u0435\u043c\u0441\u044f"}),Object(v.jsx)("p",{children:"\u0422\u0430\u0431\u0430\u0447\u043d\u044b\u0439 \u043c\u0430\u0433\u0430\u0437\u0438\u043d"})]})]})}),Object(v.jsxs)("ul",{className:"headerRight",children:[Object(v.jsxs)("li",{className:"FirstLi",onClick:e.onClickCart,children:[Object(v.jsx)("img",{src:"./img/shopping-bag-solid.svg",alt:"basket"}),Object(v.jsxs)("span",{children:[t,"\u0433\u0440\u043d."]})]}),Object(v.jsx)("li",{className:"SecondLi",children:Object(v.jsx)(i.b,{to:"/favorites",children:Object(v.jsx)("img",{src:"./img/heart-solid.svg",alt:"favorites"})})}),Object(v.jsx)("li",{className:"ThirdLi",children:Object(v.jsx)(i.b,{to:"/orders",children:Object(v.jsx)("img",{src:"./img/user-solid.svg",alt:"user"})})})]})]})},f=a(9),g=a.n(f),C=function(e){var t=e.image,a=e.title,r=e.descriprion,n=c.a.useContext(x).setCartOpen;return Object(v.jsxs)("div",{className:g.a.CartEmpty,children:[Object(v.jsx)("img",{src:t,alt:"cartempty"}),Object(v.jsx)("h2",{children:a}),Object(v.jsx)("p",{children:r}),Object(v.jsxs)("button",{onClick:function(){return n(!1)},className:"GreenButton",children:[Object(v.jsx)("img",{src:"./img/arrowleft.svg",alt:"arrowleft"}),"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"]})]})},k=function(e){return new Promise((function(t){return setTimeout(t,e)}))};var N=function(e){var t=e.onClose,a=e.onRemove,r=e.items,n=void 0===r?[]:r,s=e.open,i=O(),o=i.cartItems,l=i.setCartItems,d=i.totalPrice,m=c.a.useState(null),x=Object(b.a)(m,2),p=x[0],f=x[1],N=c.a.useState(!1),_=Object(b.a)(N,2),y=_[0],I=_[1],w=c.a.useState(!1),L=Object(b.a)(w,2),S=L[0],P=L[1],A=function(){var e=Object(u.a)(j.a.mark((function e(){var t,a,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(!0),e.next=4,h.a.post("https://616704b513aa1d00170a6957.mockapi.io/orders",{items:o});case 4:t=e.sent,a=t.data,f(a.id),I(!0),l([]),r=0;case 10:if(!(r<o.length)){e.next=19;break}return c=o[r],e.next=14,h.a.delete("https://616704b513aa1d00170a6957.mockapi.io/cart/"+c.id);case 14:return e.next=16,k(1e3);case 16:r++,e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0437\u0430\u043a\u0430\u0437\u0430 :(");case 24:P(!1);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"".concat(g.a.Overlay," ").concat(s?g.a.OverlayVisible:""),children:Object(v.jsxs)("div",{className:g.a.LilCart,children:[Object(v.jsxs)("h2",{children:["\u041a\u043e\u0440\u0437\u0438\u043d\u0430",Object(v.jsx)("img",{onClick:t,className:g.a.rmvbtn,src:"./img/remove.svg",alt:"remove"})]}),n.length>0?Object(v.jsxs)("div",{className:g.a.WholeBlock,children:[Object(v.jsx)("div",{className:g.a.Items,children:n.map((function(e){return Object(v.jsxs)("div",{className:g.a.CartItem,children:[Object(v.jsx)("img",{src:e.imageUrl,alt:"cartimage"}),Object(v.jsxs)("div",{children:[Object(v.jsx)("p",{children:e.name}),Object(v.jsxs)("b",{children:[e.price,"\u0433\u0440\u043d."]})]}),Object(v.jsx)("img",{onClick:function(){return a(e.id)},className:g.a.rmvbtn,src:"./img/remove.svg",alt:"remove"})]},e.id)}))}),Object(v.jsxs)("div",{className:g.a.CartBlock,children:[Object(v.jsxs)("ul",{children:[Object(v.jsxs)("li",{children:[Object(v.jsx)("span",{children:"\u0418\u0442\u043e\u0433\u043e:"}),Object(v.jsx)("div",{}),Object(v.jsxs)("b",{children:[d,"\u0433\u0440\u043d."]})]}),Object(v.jsxs)("li",{children:[Object(v.jsx)("span",{children:"\u041d\u0430\u043b\u043e\u0433 5%:"}),Object(v.jsx)("div",{}),Object(v.jsxs)("b",{children:[.05*d,"\u0433\u0440\u043d"]})]})]}),Object(v.jsx)("button",{disabled:S,onClick:A,className:g.a.GreenButton,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]}):Object(v.jsx)(C,{title:y?"\u0417\u0430\u043a\u0430\u0437 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d!":"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430\u044f!",descriprion:y?"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 #".concat(p," \u0441\u043a\u043e\u0440\u043e \u0431\u0443\u0434\u0435\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043a\u0443\u0440\u044c\u0435\u0440\u0441\u043a\u043e\u0439 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0435"):"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u0442\u043e\u0432\u0430\u0440 \u0447\u0442\u043e \u0431\u044b \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437",image:y?"./img/order-colpete.jpg":"./img/cart-empty.jpg"})]})})},_=a(2),y=a(35),I=a(16),w=a.n(I);var L=function(e){var t=e.id,a=e.onFavorite,r=e.onPlus,n=e.name,s=e.imageUrl,i=e.price,o=e.favorited,l=void 0!==o&&o,d=e.loading,j=void 0!==d&&d,u=c.a.useContext(x).isItemAdded,m=c.a.useState(l),h=Object(b.a)(m,2),O=h[0],p=h[1],f={id:t,parentId:t,name:n,imageUrl:s,price:i};return Object(v.jsx)("div",{className:w.a.Card,children:j?Object(v.jsxs)(y.a,{speed:2,width:200,height:265,viewBox:"0 0 150 265",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:[Object(v.jsx)("rect",{x:"0",y:"170",rx:"5",ry:"5",width:"150",height:"15"}),Object(v.jsx)("rect",{x:"0",y:"196",rx:"5",ry:"5",width:"100",height:"15"}),Object(v.jsx)("rect",{x:"0",y:"232",rx:"5",ry:"5",width:"80",height:"25"}),Object(v.jsx)("rect",{x:"115",y:"226",rx:"10",ry:"10",width:"32",height:"32"}),Object(v.jsx)("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"150",height:"155"})]}):Object(v.jsxs)(v.Fragment,{children:[a&&Object(v.jsx)("div",{className:w.a.Favorite,onClick:function(){a(f),p(!O)},children:Object(v.jsx)("img",{src:O?"./img/liked.svg":"./img/unliked.svg",alt:"unliked"})}),Object(v.jsx)("img",{src:s,alt:"product"}),Object(v.jsx)("h5",{children:n}),Object(v.jsxs)("div",{className:w.a.Price,children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{children:"\u0426\u0435\u043d\u0430: "}),Object(v.jsx)("b",{children:i})]}),r&&Object(v.jsx)("img",{className:w.a.Plus,onClick:function(){r(f)},src:u(t)?"./img/added.svg":"./img/plusbtn.svg",alt:"add button"})]})]})})};var S=function(e){var t=e.items,a=e.searchValue,r=e.setSearchValue,c=e.onChangeSearchInput,n=e.onAddToFavorite,s=e.onAddToCart,i=e.isLoading;return Object(v.jsxs)("div",{className:"Content",children:[Object(v.jsxs)("div",{className:"Search",children:[Object(v.jsx)("h1",{children:a?'\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443: "'.concat(a,'"'):"\u0412\u0435\u0441\u044c \u0441\u043d\u044e\u0441"}),Object(v.jsxs)("div",{className:"Search-block",children:[a&&Object(v.jsx)("img",{onClick:function(){return r("")},className:"clear",src:"./img/remove.svg",alt:"clear"}),Object(v.jsx)("img",{src:"./img/search-solid.svg",alt:"search"}),Object(v.jsx)("input",{onChange:c,value:a,placeholder:"\u041f\u043e\u0438\u0441\u043a..."})]})]}),Object(v.jsx)("div",{className:"Tabak",children:function(){var e=t.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())}));return(i?Object(l.a)(Array(12)):e).map((function(e,t){return Object(v.jsx)(L,Object(o.a)({onFavorite:function(e){return n(e)},onPlus:function(e){return s(e)},loading:i},e),t)}))}()})]})};var P=function(){var e=c.a.useContext(x),t=e.favorites,a=e.onAddToFavorite;return Object(v.jsxs)("div",{className:"Content",children:[Object(v.jsx)("div",{className:"Search",children:Object(v.jsx)("h1",{children:"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438"})}),Object(v.jsx)("div",{className:"Tabak",children:t.map((function(e,t){return Object(v.jsx)(L,Object(o.a)({favorited:!0,onFavorite:a},e),t)}))})]})};var A=function(){var e=c.a.useState([]),t=Object(b.a)(e,2),a=t[0],r=t[1],n=c.a.useState(!0),s=Object(b.a)(n,2),i=s[0],d=s[1];return c.a.useEffect((function(){Object(u.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("https://616704b513aa1d00170a6957.mockapi.io/orders");case 3:t=e.sent,a=t.data,r(a.reduce((function(e,t){return[].concat(Object(l.a)(e),Object(l.a)(t.items))}),[])),d(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]),Object(v.jsxs)("div",{className:"Content",children:[Object(v.jsx)("div",{className:"Search",children:Object(v.jsx)("h1",{children:"\u0417\u0430\u043a\u0430\u0437\u044b"})}),Object(v.jsx)("div",{className:"Tabak",children:(i?Object(l.a)(Array(8)):a).map((function(e,t){return Object(v.jsx)(L,Object(o.a)({loading:i},e),t)}))})]})};var B=function(){var e=c.a.useState([]),t=Object(b.a)(e,2),a=t[0],r=t[1],n=c.a.useState([]),s=Object(b.a)(n,2),i=s[0],d=s[1],m=c.a.useState([]),O=Object(b.a)(m,2),f=O[0],g=O[1],C=c.a.useState(""),k=Object(b.a)(C,2),y=k[0],I=k[1],w=c.a.useState(!1),L=Object(b.a)(w,2),B=L[0],F=L[1],T=c.a.useState(!0),E=Object(b.a)(T,2),V=E[0],R=E[1];c.a.useEffect((function(){function e(){return(e=Object(u.a)(j.a.mark((function e(){var t,a,c,n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([h.a.get("https://616704b513aa1d00170a6957.mockapi.io/cart"),h.a.get("https://616704b513aa1d00170a6957.mockapi.io/favorites"),h.a.get("https://616704b513aa1d00170a6957.mockapi.io/items")]);case 3:t=e.sent,a=Object(b.a)(t,3),c=a[0],n=a[1],s=a[2],R(!1),d(c.data),g(n.data),r(s.data),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0445"),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var z=function(){var e=Object(u.a)(j.a.mark((function e(t){var a,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=i.find((function(e){return Number(e.parentId)===Number(t.id)})))){e.next=8;break}return d((function(e){return e.filter((function(e){return Number(e.parentId)!==Number(t.id)}))})),e.next=6,h.a.delete("https://616704b513aa1d00170a6957.mockapi.io/cart/".concat(a.id));case 6:e.next=14;break;case 8:return d((function(e){return[].concat(Object(l.a)(e),[t])})),e.next=11,h.a.post("https://616704b513aa1d00170a6957.mockapi.io/cart",t);case 11:r=e.sent,c=r.data,d((function(e){return e.map((function(e){return e.parentId===c.parentId?Object(o.a)(Object(o.a)({},e),{},{id:c.id}):e}))}));case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!f.find((function(e){return Number(e.id)===Number(t.id)}))){e.next=6;break}h.a.delete("https://616704b513aa1d00170a6957.mockapi.io/favorites/".concat(t.id)),g((function(e){return e.filter((function(e){return Number(e.id)!==Number(t.id)}))})),e.next=11;break;case 6:return e.next=8,h.a.post("https://616704b513aa1d00170a6957.mockapi.io/favorites",t);case 8:a=e.sent,r=a.data,g((function(e){return[].concat(Object(l.a)(e),[r])}));case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0438"),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(x.Provider,{value:{items:a,cartItems:i,favorites:f,isItemAdded:function(e){return i.some((function(t){return Number(t.parentId)===Number(e)}))},onAddToFavorite:G,onAddToCart:z,setCartOpen:F,setCartItems:d},children:Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(N,{items:i,onClose:function(){return F(!1)},onRemove:function(e){try{h.a.delete("https://616704b513aa1d00170a6957.mockapi.io/cart/".concat(e)),d((function(t){return t.filter((function(t){return Number(t.id)!==Number(e)}))}))}catch(t){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0438\u0437 \u043a\u043e\u0440\u0437\u0438\u043d\u044b"),console.error(t)}},open:B}),Object(v.jsx)(p,{onClickCart:function(){return F(!0)}}),Object(v.jsx)(_.a,{path:"/",exact:!0,children:Object(v.jsx)(S,{items:a,cartItems:i,searchValue:y,setSearchValue:I,onChangeSearchInput:function(e){I(e.target.value)},onAddToFavorite:G,onAddToCart:z,isLoading:V})}),Object(v.jsx)(_.a,{path:"/favorites",exact:!0,children:Object(v.jsx)(P,{})}),Object(v.jsx)(_.a,{path:"/orders",exact:!0,children:Object(v.jsx)(A,{})})]})})};s.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(i.a,{children:Object(v.jsx)(B,{})})}),document.getElementById("root"))},9:function(e,t,a){e.exports={Overlay:"LilCart_Overlay__3sL5g",OverlayVisible:"LilCart_OverlayVisible__2ckg2",LilCart:"LilCart_LilCart__IC8xc",CartEmpty:"LilCart_CartEmpty__1Eal4",WholeBlock:"LilCart_WholeBlock__3dnwy",Items:"LilCart_Items__QexFS",CartItem:"LilCart_CartItem__EEQg1",rmvbtn:"LilCart_rmvbtn__3DfxP",CartBlock:"LilCart_CartBlock__2j1EI",GreenButton:"LilCart_GreenButton__2RCJX","button-loading":"LilCart_button-loading__1InBA"}}},[[69,1,2]]]);
//# sourceMappingURL=main.d0c4f196.chunk.js.map